(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[502],{7577:function(e,s,a){Promise.resolve().then(a.bind(a,8046))},8455:function(e,s,a){"use strict";function t(e){return s=>e.safeParse(s).success}a.d(s,{V:function(){return t}})},4383:function(e,s,a){"use strict";a.d(s,{X:function(){return t}});let t={PROFILE:"profile",STEPS:"steps",RUNNING:"running",OTHERS:"others",HISTORY:"history",SLEEP:"sleep"}},9028:function(e,s,a){"use strict";a.d(s,{A:function(){return l},q:function(){return n}});var t=a(7307),r=a(4383);async function n(e){return await (0,t.S)("readwrite",t.U.DATA,s=>s.put(e,r.X.PROFILE)),"Profile saved successfully!"}async function l(){let e=await (0,t.S)("readonly",t.U.DATA,e=>e.get(r.X.PROFILE));return e&&"string"==typeof e.firstName&&"string"==typeof e.lastName&&("male"===e.gender||"female"===e.gender||"prefer not to say"===e.gender)&&"number"==typeof e.age&&"number"==typeof e.height&&"number"==typeof e.weight?e:null}},5384:function(e,s,a){"use strict";a.d(s,{U:function(){return t}});let t={DATA:"data"}},4704:function(e,s,a){"use strict";a.d(s,{N:function(){return i},S:function(){return l}});var t=a(5384);let r=null;function n(){return new Promise((e,s)=>{if(r){e(r);return}let a=indexedDB.open("web-health-tracker",1);a.addEventListener("upgradeneeded",e=>{a.result.createObjectStore(t.U.DATA)}),a.addEventListener("success",()=>{r=a.result,e(a.result)}),a.addEventListener("error",s),a.addEventListener("blocked",s)})}function l(e,s,a){return new Promise((t,r)=>{n().then(n=>{let l=a(n.transaction(s,e).objectStore(s));l.addEventListener("success",()=>t(l.result)),l.addEventListener("error",()=>r(l.error))}).catch(r)})}function i(){return new Promise((e,s)=>{n().then(a=>{let r=a.transaction(t.U.DATA,"readwrite").objectStore(t.U.DATA).clear();r.addEventListener("success",()=>e()),r.addEventListener("error",()=>s(r.error))}).catch(s)})}},7307:function(e,s,a){"use strict";a.d(s,{S:function(){return t.S},U:function(){return r.U}});var t=a(4704),r=a(5384)},8046:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return x}});var t=a(7437),r=a(2265),n=a(3862),l=a(6463),i=a(9028),c=a(9772),o=a(8455);let m=c.z.object({firstName:c.z.string({invalid_type_error:"Please input your first name."}),lastName:c.z.string({invalid_type_error:"Please input your last name."}),gender:c.z.enum(["male","female","prefer not to say"],{invalid_type_error:"Please select a gender option."}),age:c.z.coerce.number().int().min(0,{message:"Age must be at least 0."}).max(100,{message:"Age must be no more than 100."}),height:c.z.coerce.number().gt(0,{message:"Height must be greater than 0."}),weight:c.z.coerce.number().min(1,{message:"Weight must be at least 1."}).max(300,{message:"Weight must be no more than 300."})});async function d(e,s){let a=m.safeParse({firstName:s.get("firstName"),lastName:s.get("lastName"),gender:s.get("gender"),age:s.get("age"),height:s.get("height"),weight:s.get("weight")});if(!a.success)return{errors:a.error.flatten().fieldErrors,message:"Validation failed. Please check the form data."};let{firstName:t,lastName:r,gender:n,age:c,height:o,weight:d}=a.data;(0,i.q)({firstName:t,lastName:r,gender:n,age:c,height:o,weight:d}),(0,l.redirect)("/management")}(0,o.V)(m);var u=a(4887),h=function(e){let{profile:s}=e,[a,n]=(0,u.useFormState)(d,{message:""}),[l,i]=(0,r.useState)((null==s?void 0:s.firstName)||""),[c,o]=(0,r.useState)((null==s?void 0:s.lastName)||""),[m,h]=(0,r.useState)((null==s?void 0:s.gender)||""),[f,g]=(0,r.useState)((null==s?void 0:s.age)||""),[x,N]=(0,r.useState)((null==s?void 0:s.height)||""),[v,j]=(0,r.useState)((null==s?void 0:s.weight)||"");return(0,t.jsxs)("form",{action:n,className:"pt-4 pr-3",children:[(0,t.jsxs)("div",{className:"row align-items-center m-4",children:[(0,t.jsx)("div",{className:"col-2",children:(0,t.jsx)("label",{htmlFor:"firstNameLabel",className:"form-label fs-6",children:"First Name:"})}),(0,t.jsx)("div",{className:"col-6",children:(0,t.jsx)("input",{type:"text",name:"firstName",className:"form-control",id:"firstName",value:l,onChange:e=>i(e.target.value)})})]}),(0,t.jsxs)("div",{className:"row align-items-center m-4",children:[(0,t.jsx)("div",{className:"col-2",children:(0,t.jsx)("label",{htmlFor:"lastNameLabel",className:"form-label fs-6",children:"Last Name:"})}),(0,t.jsx)("div",{className:"col-6",children:(0,t.jsx)("input",{type:"text",name:"lastName",className:"form-control",id:"lastName",value:c,onChange:e=>o(e.target.value)})})]}),(0,t.jsxs)("div",{className:"row align-items-center m-4",children:[(0,t.jsx)("div",{className:"col-2",children:(0,t.jsx)("label",{htmlFor:"gender",className:"form-label fs-6",children:"Gender:"})}),(0,t.jsx)("div",{className:"col-6",children:(0,t.jsxs)("select",{name:"gender",className:"form-select",id:"gender",defaultValue:m,onChange:e=>h(e.target.value),children:[(0,t.jsx)("option",{value:"",disabled:!0,children:"Select your gender"}),(0,t.jsx)("option",{value:"male",children:"Male"}),(0,t.jsx)("option",{value:"female",children:"Female"}),(0,t.jsx)("option",{value:"prefer_not_to_say",children:"Prefer not to say"})]})})]}),(0,t.jsxs)("div",{className:"row align-items-center m-4",children:[(0,t.jsx)("div",{className:"col-2",children:(0,t.jsx)("label",{htmlFor:"ageLabel",className:"form-label fs-6",children:"Age:"})}),(0,t.jsx)("div",{className:"col-6",children:(0,t.jsx)("input",{type:"text",name:"age",className:"form-control",id:"age",value:f,onChange:e=>g(e.target.value)})})]}),(0,t.jsxs)("div",{className:"row align-items-center m-4",children:[(0,t.jsx)("div",{className:"col-2",children:(0,t.jsx)("label",{htmlFor:"heightLabel",className:"form-label fs-6",children:"Height:"})}),(0,t.jsxs)("div",{className:"col-6 d-flex",children:[(0,t.jsx)("input",{type:"text",name:"height",className:"form-control",id:"height",value:x,onChange:e=>N(e.target.value)}),(0,t.jsx)("span",{className:"m-2",children:"CM"})]})]}),(0,t.jsxs)("div",{className:"row align-items-center m-4",children:[(0,t.jsx)("div",{className:"col-2",children:(0,t.jsx)("label",{htmlFor:"weightLabel",className:"form-label fs-6",children:"Weight:"})}),(0,t.jsxs)("div",{className:"col-6 d-flex",children:[(0,t.jsx)("input",{type:"text",name:"weight",className:"form-control",id:"weight",value:v,onChange:e=>j(e.target.value)}),(0,t.jsx)("span",{className:"m-2",children:"KG"})]})]}),(0,t.jsx)("div",{className:"d-flex flex-row-reverse m-4 p-2 fs-6",children:(0,t.jsx)("button",{type:"submit",className:"btn btn-outline-primary",children:"Submit"})})]})},f=a(2217),g=a(5990),x=()=>{let[e,s]=(0,r.useState)(null),[a,l]=(0,r.useState)(!0),[c,o]=(0,r.useState)(null);return((0,r.useEffect)(()=>{(async()=>{try{let e=await (0,i.A)();s(e)}catch(e){o("Failed to fetch profile")}finally{l(!1)}})()},[]),a)?(0,t.jsx)(f.Z,{}):c?(0,t.jsx)(g.Z,{error:c}):(0,t.jsx)(n.Z,{children:(0,t.jsxs)("div",{className:"mt-4 p-3",children:[(0,t.jsx)("p",{className:"fs-3",children:e?"Edit profile":"Add profile"}),(0,t.jsx)("div",{className:"border rounded shadow-sm",children:(0,t.jsx)(h,{profile:e})})]})})}},5990:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});var t=a(7437);function r(e){let{error:s}=e;return(0,t.jsx)("div",{className:"loading-container",children:(0,t.jsx)("div",{className:"alert alert-danger",role:"alert",children:(0,t.jsx)("span",{className:"sr-only",children:s})})})}},2217:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});var t=a(7437);function r(){return(0,t.jsx)("div",{className:"loading-container",children:(0,t.jsx)("div",{className:"spinner-border text-light",role:"status",children:(0,t.jsx)("span",{className:"sr-only",children:"Loading..."})})})}},3862:function(e,s,a){"use strict";var t=a(7437);a(2265);var r=a(3947);s.Z=e=>{let{children:s}=e;return(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"d-flex",children:[(0,t.jsx)("div",{className:"col-md-3 ms-sm-auto col-lg-3 px-md-4",children:(0,t.jsx)(r.default,{})}),(0,t.jsx)("main",{className:"col-md-9 ms-sm-auto col-lg-9 px-md-4",children:s})]})})}},3947:function(e,s,a){"use strict";var t=a(7437),r=a(2265),n=a(6463);s.default=()=>{(0,n.useRouter)();let e=(0,n.usePathname)(),[s,a]=(0,r.useState)(e);return(0,r.useEffect)(()=>{a(e)},[e]),(0,t.jsx)("nav",{id:"sidebarMenu",className:"col-md-3 col-lg-3 bg-light sidebar p-0",children:(0,t.jsx)("div",{className:"position-sticky",children:(0,t.jsxs)("ul",{className:"nav flex-column",children:[(0,t.jsx)("li",{className:"navbar-brand me-0 bg-dark d-flex justify-content-center bg-gradient",children:(0,t.jsx)("a",{className:"nav-link text-light","aria-current":"page",href:"/",children:(0,t.jsx)("span",{className:"fs-5",children:"WebHealthTracker"})})}),(0,t.jsx)("hr",{className:"m-0"}),(0,t.jsx)("li",{className:"p-3 m-0 nav-item fs-6 ".concat("/workouts"===s?"bg-primary":""),children:(0,t.jsx)("a",{className:"nav-link ".concat("/workouts"===s?"text-light":""),href:"/workouts",onClick:()=>a("/workouts"),children:"Workouts"})}),(0,t.jsx)("hr",{className:"m-0"}),(0,t.jsx)("li",{className:"p-3 m-0 nav-item fs-6 ".concat("/sleep"===s?"bg-primary":""),children:(0,t.jsx)("a",{className:"nav-link ".concat("/sleep"===s?"text-light":""),href:"/sleep",onClick:()=>a("/sleep"),children:"Sleep data"})}),(0,t.jsx)("hr",{className:"m-0"}),(0,t.jsx)("li",{className:"p-3 m-0 nav-item fs-6 ".concat("/history"===s?"bg-primary":""),children:(0,t.jsx)("a",{className:"nav-link ".concat("/history"===s?"text-light":""),href:"/history",onClick:()=>a("/history"),children:"Medical history"})}),(0,t.jsx)("hr",{className:"m-0"}),(0,t.jsx)("li",{className:"p-3 m-0 nav-item fs-6 ".concat("/management"===s?"bg-primary":""),children:(0,t.jsx)("a",{className:"nav-link ".concat("/management"===s?"text-light":""),href:"/management",onClick:()=>a("/management"),children:"Management"})}),(0,t.jsx)("hr",{className:"m-0"})]})})})}}},function(e){e.O(0,[842,971,23,744],function(){return e(e.s=7577)}),_N_E=e.O()}]);